# アーキテクチャ設計書

## コンポーネント図

![コンポーネント図](./res/Arch_MagicMusicBox.svg)

## シーケンス図

![シーケンス図](./res/Seq_MagicMusicBox.svg)

## 機能概要

| コンポーネント名 | 機能概要 |
| --- | --- |
| COVER | フタの開閉状態を検出する |
| DIP | DIPスイッチで、ユーザに曲の選択をさせる |
| SYSCTL | ①フタ開閉フラグから制御状態を生成する。②DIPスイッチの状態を選択曲インデックスとして外部に公開する。 |
| SCORE | 再生する曲の選択を行う |
| SOUND | 選択された曲を実際に再生する |
| OLED | 曲の情報や、全体のうち何秒再生したかを表示する |

## IF一覧

| 信号名 | IF名 | [単位,分解能] | 制約事項 |
| --- | --- | --- | --- |
| COVER_フタ開放フラグ | COVER_GetOpenedFlag | [-,-] | - |
| DIP_DIPスイッチ状態 | DIP_GetSwitchState | [-,-] | - |
| SYSCTL_制御状態 | SYSCTL_GetControlState | [-,-] | - |
| SYSCTL_選択曲インデックス | SYSCTL_GetSelectedScoreIdx | [-,-] | - |
| SCORE_曲選択成功フラグ | SCORE_GetSelectScoreSuccessFlag | [-,-] | - |
| SCORE_選択された音源情報 | SCORE_GetSelectedScore | [-,-] | 曲選択成功フラグ=OFF時には参照してはならない |
| SCORE_選択されたアーティスト名 | SCORE_GetSelectedArtistName | [-,-] | 曲選択成功フラグ=OFF時には参照してはならない |
| SCORE_選択された曲名 | SCORE_GetSelectedScoreName | [-,-] | 曲選択成功フラグ=OFF時には参照してはならない |
| SCORE_曲の長さ | SCORE_GetScoreFullTime | [ms,-] | 曲選択成功フラグ=OFF時には参照してはならない |
